import{h as n,C as d,F as p,d as m,c as _,o as h,u as f,a as b,b as B,e as C,t as $}from"./index-BoYZnnuC.js";const g="vue-strapi-blocks-renderer",M=({componentsContext:e,text:t,...o})=>{const{modifiers:r,missingModifierTypes:i}=e;return Object.keys(o).reduce((l,c)=>{if(!o[c])return l;const s=r[c];return s?s({children:l}):(i.includes(c)||(console.warn(`[${g}] No component found for modifier "${c}"`),i.push(c)),l)},t)},w=["image"],v=e=>{const{children:t,type:o,...r}=e;if(o==="code"){const i=l=>l.reduce((c,s)=>s.type==="text"?c.concat(s.text):s.type==="link"?c.concat(i(s.children)):c,"");return{...r,plainText:i(e.children)}}return r},k=({content:e,componentsContext:t})=>{const{children:o,type:r,...i}=e,{blocks:l,missingBlockTypes:c}=t,s=l[r];if(!s)return c.includes(r)||(console.warn(`[${g}] No component found for block type "${r}"`),c.push(r)),null;if(w.includes(r))return s(i);if(r==="paragraph"&&o.length===1&&o[0].type==="text"&&o[0].text==="")return n("br");const y=v(e),x=o.map(a=>{if(a.type==="text"){const{type:E,...T}=a;return M({componentsContext:t,...T})}return k({content:a,componentsContext:t})});return s({children:x,...y})},u={blocks:{paragraph:e=>n("p",{},e.children),quote:e=>n("blockquote",{},e.children),code:e=>n("pre",{},[n("code",{},e.plainText)]),heading:({level:e,children:t})=>{switch(e){case 1:return n("h1",{},t);case 2:return n("h2",{},t);case 3:return n("h3",{},t);case 4:return n("h4",{},t);case 5:return n("h5",{},t);case 6:return n("h6",{},t)}},link:e=>n("a",{href:e.url},e.children),list:e=>{const t=e.format==="ordered";return n(t?"ol":"ul",{},e.children)},"list-item":e=>n("li",{},e.children),image:({image:e})=>n("img",{src:e.url,alt:e.alternativeText||void 0})},modifiers:{bold:e=>n("strong",{},e.children),italic:e=>n("em",{},e.children),underline:e=>n("u",{},e.children),strikethrough:e=>n("del",{},e.children),code:e=>n("code",{},e.children)}},N=e=>{const t={...u.blocks,...e.blocks},o={...u.modifiers,...e.modifiers},r={blocks:t,modifiers:o,missingBlockTypes:[],missingModifierTypes:[]};if(!e.content)throw new Error("BlocksRenderer content is empty");const i=e.content.map(l=>k({content:l,componentsContext:r}));return r.missingBlockTypes.length&&i.unshift(n(d,`missingBlockTypes: ${r.missingBlockTypes}`)),r.missingModifierTypes.length&&i.unshift(n(d,`missingModifierTypes: ${r.missingModifierTypes}`)),n(p,i)},q=m({__name:"RichText",props:["content"],setup(e){return(t,o)=>(h(),_(f(N),{content:e.content},null,8,["content"]))}}),R=m({__name:"TextBlock",props:{header:{},text:{},id:{},documentId:{},__component:{}},setup(e){return(t,o)=>(h(),b(p,null,[B("h1",null,$(t.header),1),C(f(q),{content:t.text},null,8,["content"])],64))}});export{R as default};
