import{h as n,C as d,F as p,d as h,c as m,o as f,a as g,u as k,b as B,t as C}from"./index-Dene-xmw.js";const y="vue-strapi-blocks-renderer",$=({componentsContext:e,text:t,...o})=>{const{modifiers:r,missingModifierTypes:c}=e;return Object.keys(o).reduce((l,i)=>{if(!o[i])return l;const s=r[i];return s?s({children:l}):(c.includes(i)||(console.warn(`[${y}] No component found for modifier "${i}"`),c.push(i)),l)},t)},M=["image"],v=e=>{const{children:t,type:o,...r}=e;if(o==="code"){const c=l=>l.reduce((i,s)=>s.type==="text"?i.concat(s.text):s.type==="link"?i.concat(c(s.children)):i,"");return{...r,plainText:c(e.children)}}return r},x=({content:e,componentsContext:t})=>{const{children:o,type:r,...c}=e,{blocks:l,missingBlockTypes:i}=t,s=l[r];if(!s)return i.includes(r)||(console.warn(`[${y}] No component found for block type "${r}"`),i.push(r)),null;if(M.includes(r))return s(c);if(r==="paragraph"&&o.length===1&&o[0].type==="text"&&o[0].text==="")return n("br");const T=v(e),_=o.map(a=>{if(a.type==="text"){const{type:E,...b}=a;return $({componentsContext:t,...b})}return x({content:a,componentsContext:t})});return s({children:_,...T})},u={blocks:{paragraph:e=>n("p",{},e.children),quote:e=>n("blockquote",{},e.children),code:e=>n("pre",{},[n("code",{},e.plainText)]),heading:({level:e,children:t})=>{switch(e){case 1:return n("h1",{},t);case 2:return n("h2",{},t);case 3:return n("h3",{},t);case 4:return n("h4",{},t);case 5:return n("h5",{},t);case 6:return n("h6",{},t)}},link:e=>n("a",{href:e.url},e.children),list:e=>{const t=e.format==="ordered";return n(t?"ol":"ul",{},e.children)},"list-item":e=>n("li",{},e.children),image:({image:e})=>n("img",{src:e.url,alt:e.alternativeText||void 0})},modifiers:{bold:e=>n("strong",{},e.children),italic:e=>n("em",{},e.children),underline:e=>n("u",{},e.children),strikethrough:e=>n("del",{},e.children),code:e=>n("code",{},e.children)}},w=e=>{const t={...u.blocks,...e.blocks},o={...u.modifiers,...e.modifiers},r={blocks:t,modifiers:o,missingBlockTypes:[],missingModifierTypes:[]};if(!e.content)throw new Error("BlocksRenderer content is empty");const c=e.content.map(l=>x({content:l,componentsContext:r}));return r.missingBlockTypes.length&&c.unshift(n(d,`missingBlockTypes: ${r.missingBlockTypes}`)),r.missingModifierTypes.length&&c.unshift(n(d,`missingModifierTypes: ${r.missingModifierTypes}`)),n(p,c)},N={class:"rich-text"},q=h({__name:"RichText",props:["content"],setup(e){return(t,o)=>(f(),m("div",N,[g(k(w),{content:e.content},null,8,["content"])]))}}),R=h({__name:"TextBlock",props:{header:{},text:{},id:{},documentId:{},__component:{}},setup(e){return(t,o)=>(f(),m(p,null,[B("h1",null,C(t.header),1),g(k(q),{content:t.text},null,8,["content"])],64))}});export{R as default};
